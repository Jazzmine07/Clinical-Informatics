const mysql = require('./connection');


const userSchema = new mysql.Schema({
    _id: mysql.Schema.Types.ObjectId,
    firstName: {type: String, required: true, min: 1, max: 100},
    lastName: {type: String, required: true, min: 1, max: 100},
    role: {type: String, required: true, min: 1, max: 100 },
    email:{type: String, required: true, min: 1, max: 100 },
    password:{type: String, required: true, min: 1, max: 100 },
    isRegistrar:{},
    isClinician:{},
    // add user info
});


const userModel = mongoose.model('User', userSchema);


userModel.create = function(obj, next) {
    const User = new userModel(obj);
  
    User.save(function(err, User) {
      next(err, User);
    });
};

userModel.getUser = function(query, next){
    userModel.findOne({ email: query }, function (err, user) {
        if (err) throw err;

        next(err, User);
      });
};

userModel.getRole = function(query, next){

    userModel.findOne(query).exec(function(err, Role) {
        if (err) throw err;

        next(err, Role);
    });
  
}

module.exports = mongoose.model('User', userSchema);
