const mysql = require('mysql');
const connection = mysql.createConnection({
    host: 'localhost',
    port: 3307,
    database: 'clinical_informatics',
    user: 'root',
    password: 'p@ssword', 
});

con.connect(function(err) {
    if (err) throw err;
    console.log("Connected!");
    var sql = "INSERT INTO user (id, first_name, las_name,role,email,password) VALUES ('Company Inc', 'Highway 37')";
    con.query(sql, function (err, result) {
      if (err) throw err;
      console.log("1 record inserted");
    });
});



// const mysql = require('./connection');


const userSchema = new mysql.Schema({
    _id: mysql.Schema.Types.ObjectId,
    firstName: {type: String, required: true, min: 1, max: 100},
    lastName: {type: String, required: true, min: 1, max: 100},
    role: {type: String, required: true, min: 1, max: 100 },
    email:{type: String, required: true, min: 1, max: 100 },
    password:{type: String, required: true, min: 1, max: 100 }
    // add user info
});


const userModel = mongoose.model('User', userSchema);


userModel.create = function(obj, next) {
    const User = new userModel(obj);
  
    User.save(function(err, User) {
      next(err, User);
    });
};

userModel.getUser = function(query, next){
    userModel.findOne({ email: query }, function (err, user) {
        if (err) throw err;

        next(err, User);
      });
};

userModel.getRole = function(query, next){

    userModel.findOne(query).exec(function(err, Role) {
        if (err) throw err;

        next(err, Role);
    });
  
}

module.exports = mongoose.model('User', userSchema);
